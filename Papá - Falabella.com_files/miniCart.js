function addItemToCart(d,a){if(d&&a){var b="main_"+d+"_"+a;var c=document.getElementById(b);var e=null;if(c==null){e=1}else{e=$("#"+b).val()}$.ajaxSetup({contentType:"application/x-www-form-urlencoded; charset=utf-8"});$("#AddItemToCartSKU").val(a);$("#AddItemToCartPRO").val(d);$("#AddItemToCartQTY").val(e);$("#FormHandlerFrom").val("normal");$("#AddEGiftToCartEAddress").val("");$("#productIds").val(d);$("#catalogRefIds").val(a);$("#quantityList").val(e);$("#addItemToCartForm").ajaxSubmit({type:"POST",async:false,success:successMiniList,url:context+"/cart/includes/miniShoppingCart.jsp"})}}function addItemToCartForPopup(b,a){if(b&&a){parent.$("#AddItemToCartSKU").val(a);parent.$("#AddItemToCartPRO").val(b);parent.$("#AddItemToCartQTY").val("1");parent.$("#FormHandlerFrom").val("comparPopup");parent.$("#AddEGiftToCartEAddress").val("");$.ajaxSetup({contentType:"application/x-www-form-urlencoded; charset=utf-8"});$("#productIds").val(b);$("#catalogRefIds").val(a);$("#quantityList").val("1");$("#addItemToCartForm").ajaxSubmit({success:successPopup,url:context+"/cart/includes/miniShoppingCart.jsp"})}}function addItemToCartFromSKU(d,b){var e=$("#"+d).val();var a=$("#"+b).val();if(""===a){$("#addToCartError").html("<b>"+addToCart_skuid_empty+"</b>");$("#errorShoppingCartMessage").click();return}if(""==e){$("#addToCartError").html("<b>"+addToCart_quantuty_empty+"</b>");$("#errorShoppingCartMessage").click();return}$.ajaxSetup({contentType:"application/x-www-form-urlencoded; charset=utf-8"});var c;$.ajax({async:false,type:"POST",url:context+"/browse/includes/ajaxIsEGiftSKU.jsp",data:{sku:a},success:function(f){f=$.trim(f);if(f=="isTrue"){$("#addToCartError").html("<b>"+quickOrder_addEGift_error+"<b>");$("#errorShoppingCartMessage").click()}else{$.ajax({async:false,type:"POST",url:context+"/browse/includes/ajaxIsSKUOutOfStockFormSKU.jsp",data:{sku:a,quickAddFlag:"true"},success:function(j){j=$.trim(j);var i=/^productId=.+/;var h=j.match(i);if(h==null){$("#infoAddToCart").html(j);var l=$.trim($(j).find(".titulo").text());var g=l||$.trim(j);var k={omnitureBreadcrumbs:"Bolsa de compras",omnitureS_prop12:g};omnitureMessageSend(k);return}else{j=j.substring(10,j.length);c=$.trim(j)}}})}}});if(e&&a&&c){$("#AddItemToCartSKU").val(a);$("#AddItemToCartPRO").val("");$("#AddItemToCartQTY").val("");$("#FormHandlerFrom").val("quickOrder");$("#AddEGiftToCartEAddress").val("");$("#productIds").val(c);$("#catalogRefIds").val(a);$("#quantityList").val(e);$("#addItemToCartForm").ajaxSubmit({type:"POST",cache:false,async:false,success:successFromSKU,url:context+"/cart/includes/miniShoppingCart.jsp"})}}function successFromSKU(c){$("#errorInfoAddItemToCart").html(c);$("#addToCartError").html("");var b=$("#errorMessageMinCart").html();if(b!=null){b=$.trim(b);if(b.length!=0||b!=""){if(b.indexOf(addItemToCart_hasOtherSkutypeInCart)>=0){$("#errorInfoAddItemToCart").html("");$("#normalEGiftMerge").click()}else{if(b.indexOf("There was an error while attempting to add the item to the order.")>=0||b.indexOf("Order data for your browser window was out of date.")>=0){$("#addToCartError").html("<b>"+addToCart_error+"</b>")}else{$("#addToCartError").html(b)}$("#errorInfoAddItemToCart").html("");$("#errorShoppingCartMessage").click()}}else{var a=$("#skuAddToCart").val();window.location.href=context+"/cart/cart.jsp?addItem=ture&addItemId=;"+a.replace("-","")}}inintContinue()}function successMiniList(d){$("#menuCarro").html(d);var c;$("#addToCartError").html("");if($(d).find("#errorMessageMinCart").html()!=null){c=$.trim($(d).find("#errorMessageMinCart").html());if(c.length!=0||c!=""){if(c.indexOf(addItemToCart_hasOtherSkutypeInCart)>=0){$("#menuCarro").html("");$("#normalEGiftMerge").click()}else{if(c.indexOf("There was an error while attempting to add the item to the order.")>=0||c.indexOf("Order data for your browser window was out of date.")>=0){$("#addToCartError").html("<b>"+addToCart_error+"</b>")}else{$("#addToCartError").html(c)}$("#menuCarro").html("");$("#errorShoppingCartMessage").click()}}else{if("oneClick"==parent.$("#isFromOnClick").val()){$("#headQuantity").html($(d).find("#itemCount").html());parent.$("#isFromOnClick").val("");$("#expressCheckoutFormRedirectURL").val(parent.window.$("#expressCheckoutRedirectURL").val());$("#expressCheckoutBtn").click();closeColorBox()}else{closeColorBox();setTimeout(function(){$("#headQuantity").html($(d).find("#itemCount").html());showAddItemToCart("#carro-compras","dosmenudone","#menuCarro","#navunolink","unoover")},300)}}}var b=$("#shoppingCartLocation").val();var a=shoppingcart_page_title;if(b==a){refreshCart();refreshCartRecommendation()}inintContinue()}function refreshCartRecommendation(){var displayATGRec=$("#displayRecommendationId").val();if(displayATGRec=="false"){return}try{$.ajax({url:ctx+"/includes/recommendations/recommendationsShoppingCart.jsp",dataType:"html",success:function(data){var json=eval("("+data+")");recProdCount=0;var request=new ATGSvcs.RESTRequest();ATGSvcs.cart(request,json);ATGSvcs.view(request);ATGSvcs.recommendations(request);request.send()}})}catch(e){}}function successPopup(b){parent.window.$("#menuCarro").html(b);parent.window.$("#addToCartError").html("");var a;if(parent.window.$("#errorMessageMinCart").html()!=null){a=$.trim(parent.window.$("#errorMessageMinCart").html());if(a.length!=0||a!=""){if(a.indexOf("There was an error while attempting to add the item to the order.")>=0||a.indexOf("Order data for your browser window was out of date.")>=0){$("#addToCartError").html("<b>"+addToCart_error+"</b>")}else{$("#addToCartError").html("<div class='textoError'>"+a+"</div>")}parent.window.$("#menuCarro").html("");if(a.indexOf(addItemToCart_hasOtherSkutypeInCart)>=0){parent.$("#normalEGiftMerge").click()}}else{parent.$.fn.colorbox.close();parent.window.$("#headQuantity").html(parent.window.$("#itemCount").html());parent.showAddItemToCartPopup("#carro-compras","dosmenudone","#menuCarro","#navunolink","unoover")}}inintContinue()}function inintContinue(){$("#normalConinue").val("false");$("#giftConinue").val("false");$("#EGiftConinue").val("false")}function setErrorMessage(){return $("#addToCartError").html()};